<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://d3js.org/d3.v6.min.js"></script>

</head>
<style>
  body {
    background-color: black;
  }
</style>
<body>
    <button id="animate-btn">usa-to-ukraine</button>
    <button id="animate-btn2">ukraine-to-usa</button>
    <button id="animate-btn3">uraine-to-china</button>


    <svg width="800" height="200">
      <defs>
        <mask id="mask">
          <rect width="0" height="100%" fill="white"/>
          <!-- <g transform="translate(-50,-50)">
            <path id="maskPath" d="M279.754,106.848c-3.979,0.06-9.013,0.091-15.556,0.091c-8.518,0-20.531-8.377-29.049-8.377s-18.201,2.058-26.72,4.85c-8.518,2.792-20.531,11.905-29.049,11.905c-8.542,0-19.413-5.732-27.954-5.732c-8.518,0-19.366,1.396-27.884,3.086c-8.518,1.69-20.531,4.703-29.049,7.055c8.518-0.588,20.531-0.294,29.049-0.882c8.518-0.588,19.366-5.732,27.884-5.732c8.542,0,19.413,5.732,27.954,5.732c8.518,0,20.531-1.323,29.049-1.323c8.518,0,18.201,1.323,26.72,1.323s20.9-10.673,29.418-10.673C271.145,108.171,279.804,107.233,279.754,106.848z" fill="none" stroke="black" stroke-width="10"/>
          </g> -->
        </mask>
      </defs>
      
       <!-- USA -->
      <g  id="usa" class="countries">
          <path fill="#FF0046" fill-opacity="0.7" d="M25.697,107.005v0.668c6.466,4.506,14.696,9.012,21.162,9.012
            c4.139,0,9.003-2.838,13.663-4.991c-4.659,1.521-9.524,2.988-13.663,2.988C40.393,114.682,32.164,110.843,25.697,107.005z"/>
          <path fill="#FF0046" fill-opacity="0.7" d="M208.217,99.231c-3.013,0.045-6.823,0.069-11.776,0.069
            c-6.449,0-15.542-6.342-21.991-6.342c-6.449,0-13.779,1.558-20.228,3.672c-6.449,2.114-15.542,9.012-21.991,9.012
            c-6.466,0-14.696-4.339-21.162-4.339c-6.449,0-14.661,1.057-21.109,2.337s-15.542,3.56-21.991,5.341
            c6.449-0.445,15.542-0.223,21.991-0.668c6.449-0.445,14.661-4.339,21.109-4.339c6.466,0,14.696,4.339,21.162,4.339
            c6.449,0,15.542-1.001,21.991-1.001c6.449,0,13.779,1.001,20.228,1.001c6.449,0,15.822-8.08,22.271-8.08
            C201.7,100.233,208.255,99.522,208.217,99.231z"/>
          <path fill="#FFFFFF" fill-opacity="0.7" d="M207.94,99.154c-2.961,0.084-6.381-1.003-11.166-1.003
            c-6.449,0-15.875-8.03-22.323-8.03c-6.449,0-13.779,1.001-20.228,1.001c-6.449,0-15.542-1.001-21.991-1.001
            c-6.466,0-14.696,4.339-21.162,4.339c-6.449,0-14.661-3.894-21.109-4.339c-6.449-0.445-15.542-0.223-21.991-0.668
            c-6.449-0.445-14.661-7.343-21.109-7.343c-6.466,0-14.696,4.506-21.162,9.012v16.022c6.466,3.839,14.696,7.677,21.162,7.677
            c6.449,0,14.661-3.56,21.109-5.341c6.449-1.78,15.542-4.061,21.991-5.341s14.661-2.337,21.109-2.337
            c6.466,0,14.696,4.339,21.162,4.339c6.449,0,15.542-6.898,21.991-9.012c6.449-2.114,13.779-3.672,20.228-3.672
            c6.449,0,15.542,6.342,21.991,6.342c4.953,0,8.763-0.024,11.776-0.069C208.18,99.451,208.305,99.226,207.94,99.154z"/>
          <path fill="#FF0046" fill-opacity="0.7" d="M429.636,86.116c-6.466,2.284-15.578,6.342-22.044,6.342
            c-6.449,0-14.661-9.346-21.109-9.346c-6.449,0-14.661,4.395-21.109,5.674s-15.542,2.003-21.991,2.003
            c-6.466,0-14.696-2.003-21.162-2.003c-6.449,0-14.661,0.334-21.109,0.334s-14.661-3.004-21.109-3.004
            c-6.449,0-14.661,2.229-21.109,4.005c-6.466,1.781-16.549,5.602-22.926,6.676c-12.571,2.117-14.972,1.975-15.381,2.828
            c0.559,0.844,8.288,2.556,15.381,3.848c6.388,1.164,16.459,5.562,22.926,7.343c6.449,1.776,14.661,3.338,21.109,3.338
            c6.449,0,14.661-4.339,21.109-4.339s14.661,1.001,21.109,1.001c6.466,0,14.696-1.001,21.162-1.335
            c6.449-0.333,15.542-0.668,21.991-0.668s14.661,5.007,21.109,5.007c6.449,0,14.661-9.346,21.109-9.346
            c6.466,0,15.578,4.726,22.044,7.009c6.449,2.278,14.661,4.477,21.109,6.676V78.772C444.297,81.305,436.085,83.838,429.636,86.116z"
            />
          <path fill="#FFFFFF" fill-opacity="0.7" d="M343.383,87.451c-6.466-0.334-14.696-1.335-21.162-1.335
            c-6.449,0-14.661,1.001-21.109,1.001s-14.661-4.339-21.109-4.339c-6.449,0-14.661,1.562-21.109,3.338
            c-6.466,1.781-7.38,5.102-13.063,8.102c-1.482,0.782,6.68-2.166,13.063-4.096c6.398-1.935,14.661-4.005,21.109-4.005
            c6.449,0,14.661,3.004,21.109,3.004s14.661-0.334,21.109-0.334c6.466,0,14.696,2.003,21.162,2.003
            c6.449,0,15.542-0.723,21.991-2.003c1.734-0.344,3.597-0.916,5.518-1.564c-1.92,0.529-3.784,0.897-5.518,0.897
            C358.925,88.118,349.831,87.784,343.383,87.451z"/>
          <path fill="#FFFFFF" fill-opacity="0.7" d="M370.891,87.222c5.222-1.439,10.877-4.11,15.592-4.11
            C381.768,83.112,376.113,85.458,370.891,87.222z"/>
          <path fill="#FFFFFF" fill-opacity="0.7" d="M429.636,85.448c-6.466,2.284-15.578,7.009-22.044,7.009
            c6.466,0,15.578-4.058,22.044-6.342c6.449-2.278,14.661-4.811,21.109-7.343C444.297,80.972,436.085,83.171,429.636,85.448z"/>
        </g> 

        <!-- Ukraine -->
        <g id="ukraine" mask="url(#mask)" class="countries">
          <path fill="#FFFFFF" fill-opacity="0.7" d="M48.837,92.45c-0.003,0-0.007-0.001-0.011-0.001v-0.005
          c-0.008,0-0.017,0.002-0.026,0.002c-0.008,0-0.017-0.002-0.026-0.002l0,0.013c-1.099,0.111-2.348,1.312-5.048,3.566
          c-1.239,1.034-3.056,1.749-4.83,2.146c-0.912,0.204-0.215,0.425-0.215,0.425s3.172,0.704,5.045,2.27
          c1.119,0.935,1.98,1.679,2.693,2.25l2.417,0.025V92.45z"/>
        <path fill="#FF0046" fill-opacity="0.7" d="M69.58,103.44c-6.327-0.111-14.417-0.223-20.743-0.334v0.032l-2.417-0.025
          c1.034,0.828,1.748,1.279,2.406,1.325l0,0.003c0.003,0,0.007-0.001,0.011-0.001v0.001C55.164,103.941,63.254,103.44,69.58,103.44z"
          />
        <path fill="#FF0046" fill-opacity="0.7" d="M133.626,95.128c-6.344,0-15.333,11.015-21.677,11.015
          c-6.327,0-14.417-2.114-20.743-2.337c-5.621-0.198-13.326-0.22-19.413-0.3c6.087,0.165,13.792,0.944,19.413,1.636
          c6.327,0.779,14.417,3.004,20.743,3.004c6.344,0,15.318-0.85,21.677-1.001c5.367-0.128,5.942-6.813,12.221-8.765
          C141.108,96.695,136.911,95.128,133.626,95.128z"/>
        <path fill="#FFFFFF" fill-opacity="0.7" d="M133.626,89.787c-6.344-0.436-15.333-1.001-21.677-1.001
          c-6.327,0-14.417,2.225-20.743,3.004c-6.327,0.779-15.298,1.669-21.625,1.669c-6.327,0-14.417-0.501-20.743-1.001v10.681
          c6.327,0.111,14.417,0.223,20.743,0.334c6.327,0.111,15.298,0.111,21.625,0.334c6.327,0.223,14.417,2.337,20.743,2.337
          c6.344,0,15.333-11.015,21.677-11.015c5.002,0.527,7.567,1.674,12.346,3.275C141.361,97.618,137.134,90.029,133.626,89.787z"/>
        <path fill="#FFFFFF" fill-opacity="0.7" d="M198.501,98.927"/>
        <path fill="#FFFFFF" fill-opacity="0.7" d="M208.896,98.657c0.912-0.143,0.215-0.297,0.215-0.297s-3.172-0.492-5.045-1.586
          c-2.741-1.601-3.987-2.443-5.099-2.498v-0.002c-0.004,0-0.007,0.001-0.011,0.001c-0.003,0-0.007-0.001-0.011-0.001l0,0.002
          c-1.112,0.055-2.358,0.896-5.099,2.498c-1.219,0.712-2.982,1.167-4.069,1.4c3.662,0.299,9.917,0.694,17.771,0.738
          C207.994,98.812,208.446,98.727,208.896,98.657z"/>
        <path fill="#FF0046" fill-opacity="0.7" d="M189.017,98.657c1.774,0.278,3.591,0.777,4.83,1.5c2.7,1.575,3.949,2.414,5.048,2.491
          l0,0.009c0.008,0,0.017-0.001,0.025-0.002c0.008,0,0.017,0.001,0.026,0.002v-0.003c0.003,0,0.007-0.001,0.011-0.001
          c0.003,0,0.007,0.001,0.011,0.001v0.003c0.008,0,0.017-0.001,0.025-0.002c0.008,0,0.017,0.001,0.026,0.002l0-0.009
          c1.099-0.078,2.348-0.916,5.048-2.491c0.925-0.539,2.172-0.954,3.483-1.245c-7.855-0.044-14.109-0.438-17.771-0.738
          c-0.584,0.125-0.977,0.187-0.977,0.187S188.105,98.514,189.017,98.657z"/>
        <path fill="#FF0046" fill-opacity="0.7" d="M430.463,90.121c-0.136,0-0.267,0.055-0.393,0.139
          c-1.042,0.363-2.295,1.993-4.782,4.886c-1.239,1.441-3.056,2.436-4.83,2.99c-0.912,0.285-0.215,0.592-0.215,0.592
          s3.172,0.98,5.045,3.162c2.741,3.193,3.987,4.872,5.099,4.98l0,0.004c0.003,0,0.007-0.002,0.011-0.002v-0.072
          c0.022,0.001,0.043,0.01,0.066,0.01c6.327,0,15.298,8.178,21.625,16.356v-49.4C445.761,81.943,436.79,90.121,430.463,90.121z"/>
        <path fill="#FFFFFF" fill-opacity="0.7" d="M345.674,92.458c-6.344-0.89-14.451-2.445-20.795-4.005
          C331.222,90.236,339.33,92.458,345.674,92.458z"/>
        <path fill="#FFFFFF" fill-opacity="0.7" d="M345.674,92.458c6.327,0.888,15.298,1.335,21.625,1.335
          c6.327,0,15.298-5.674,21.625-5.674c-6.327,0-15.298,3.227-21.625,3.672C360.972,92.235,352.001,92.458,345.674,92.458z"/>
        <path fill="#FFFFFF" fill-opacity="0.7" d="M303.253,81.777c-6.327-3.004-15.298-11.349-21.625-11.349
          c-6.327,0-17.098,14.735-21.625,19.026c-2.211,2.095-5.222,7.428-10.53,8.807c0,0-1.839,0.594,10.53-0.129
          c6.316-0.369,15.298-20.361,21.625-20.361c6.327,0,15.298,3.56,21.625,5.341c6.327,1.78,15.298,3.784,21.625,5.341
          C318.552,86.673,309.58,84.781,303.253,81.777z"/>
        <path fill="#FF0046" fill-opacity="0.7" d="M399.079,98.122c0,0-3.172-1.204-5.045-3.883c-2.172-3.107-3.401-5.026-4.372-5.764
          c-0.225-0.22-0.466-0.351-0.727-0.354v-0.002c-0.002,0-0.003,0.001-0.005,0.001c-0.002,0-0.004-0.001-0.006-0.001
          c-6.327,0-15.298,5.674-21.625,5.674c-6.327,0-15.298-0.447-21.625-1.335c-6.344-0.89-14.451-2.445-20.795-4.005
          c-6.327-1.556-15.298-3.56-21.625-5.341c-6.327-1.78-15.298-5.341-21.625-5.341c-6.327,0-15.298,20.228-21.625,20.361
          c-5.965,0.126-11.964,0.304-10.627,0.288c4.345-0.051,6.643,5.608,10.627,9.058c4.727,4.093,15.298,19.026,21.625,19.026
          c6.327,0,15.298-8.345,21.625-11.349c6.327-3.004,15.298-4.897,21.625-6.676c6.344-1.784,14.451-4.005,20.795-4.005
          c6.327,0,15.298,0.223,21.625,0.668c6.327,0.445,15.298,3.672,21.625,3.672c0.527,0,0.971-0.411,1.341-1.1
          c0.885-0.969,2.021-2.697,3.768-5.193c1.239-1.769,3.056-2.991,4.83-3.671C399.775,98.499,399.079,98.122,399.079,98.122z"/>
      </g>


      <!-- China -->
      <g id="china" class="countries">
        <path fill="#FFFFFF" fill-opacity="0.7" d="M186.375,97.692c0,0-3.172-0.626-5.045-2.019c-2.741-2.039-3.987-3.111-5.099-3.18
          v-0.001c0-0.001,0-0.001,0-0.002h-0.302c-6.427,0-14.616-1.001-21.043-1.001c-6.427,0-16.35,2.336-22.777,2.336
          c-6.444,0-9.482-0.526-20.22-0.376v0.047c-1.042,0.191-2.295,1.048-4.781,2.564c-1.874,1.143-5.045,1.657-5.045,1.657
          s-0.696,0.161,0.215,0.31c1.774,0.29,3.591,0.811,4.83,1.566c2.486,1.515,3.739,2.368,4.781,2.559v0.053
          c15.493,0.747,13.776-0.368,20.22-0.368c6.426,0,16.35,2.337,22.777,2.337c6.427,0,14.616-1.001,21.043-1.001h0.028
          c-0.001-0.02-0.001-0.04-0.002-0.06c0.068,0.013,0.137,0.034,0.204,0.04l0,0.012c0.008,0,0.017-0.002,0.025-0.002
          c0.008,0,0.017,0.002,0.026,0.002v-0.004c0.003,0,0.007-0.001,0.011-0.001c0.003,0,0.007,0.001,0.011,0.001v0.004
          c0.008,0,0.017-0.002,0.026-0.002c0.008,0,0.017,0.002,0.026,0.002l0-0.012c1.099-0.099,2.348-1.167,5.048-3.172
          c1.238-0.92,3.056-1.556,4.83-1.909C187.071,97.889,186.375,97.692,186.375,97.692z"/>
        <path fill="#FFFFFF" fill-opacity="0.7" d="M430.307,91.823c-6.444,0.669-14.652,3.672-21.096,3.672
          c-6.427,0-15.498-11.349-21.925-11.349c-6.427,0-14.616,3.672-21.043,3.672c-6.426,0-14.616-1.669-21.043-1.669
          c-6.444,0-14.652,2.281-21.096,3.004c-6.427,0.721-15.498,1.335-21.925,1.335s-15.498-2.337-21.925-2.337
          s-14.616,3.228-21.043,3.672c-6.444,0.445-14.652,0.668-21.096,0.668h-0.416c0,0.024,0.002,0.048,0.003,0.072
          c-1.025,0.271-2.278,1.314-4.694,3.111c-1.874,1.394-5.045,2.019-5.045,2.019s-0.696,0.196,0.215,0.378
          c1.774,0.354,3.591,0.989,4.83,1.909c2.7,2.005,3.949,3.073,5.048,3.172l0,0.012c0.008,0,0.017-0.002,0.026-0.002
          c0.008,0,0.017,0.002,0.026,0.002v-0.004c0.003,0,0.007-0.001,0.011-0.001c0.003,0,0.007,0.001,0.011,0.001v0.004
          c0.008,0,0.017-0.002,0.025-0.002c0.008,0,0.017,0.002,0.026,0.002l0-0.012c0.078-0.007,0.16-0.03,0.24-0.047
          c0.001,0.022,0.004,0.044,0.005,0.067h-0.309c6.444,0,14.652,0.223,21.096,0.668c6.426,0.444,14.616,3.672,21.043,3.672
          s15.498-2.336,21.925-2.336s15.498,0.614,21.925,1.335c6.444,0.723,14.652,3.004,21.096,3.004c6.427,0,14.616-1.669,21.043-1.669
          c6.427,0,14.616,3.672,21.043,3.672c6.427,0,15.498-11.349,21.925-11.349c6.444,0,14.652,3.002,21.096,3.672
          c6.426,0.668,14.616,0.834,21.043,1.001V90.821C444.923,90.988,436.734,91.155,430.307,91.823z"/>
        <path fill="#FFFFFF" fill-opacity="0.7" d="M37.29,97.747c0,0-3.172-0.391-5.045-1.261c-2.741-1.274-3.987-1.943-5.099-1.987
          l0-0.001c-0.003,0-0.007,0.001-0.011,0.001v6.663c0.003,0,0.007,0.001,0.011,0.001v0.003c0.008,0,0.017-0.001,0.026-0.001
          c0.008,0,0.017,0.001,0.026,0.001l0-0.007c1.099-0.062,2.348-0.729,5.048-1.981c1.239-0.575,3.056-0.972,4.83-1.193
          C37.986,97.869,37.29,97.747,37.29,97.747z"/>
      </g>
    
   
      </svg>

    
    <script>
        const svg = d3.select("svg");
        const maskRect = d3.select("#mask rect");
        
        d3.selectAll(".countries")
          .attr("opacity", 0);

        d3.select("#usa")
          .attr("opacity", 1);


function reDraw(itemToShow, itemToHide){

  d3.selectAll(".countries")
        .attr("mask", null);
        d3.selectAll(`.countries:not(${itemToHide})`).attr("opacity", 0);

  d3.select(itemToShow)
        .attr("mask", "url(#mask)")
        .attr("opacity", 1);

      const maskPath = d3.select("#maskPath");
      maskRect.attr("width", "0%");

  

   //hide previous svg
   d3.select(itemToHide)
        .attr("opacity", 1)
        .transition()
        .duration(2000)
        .attr("opacity", 0)


      maskRect.transition()
        .duration(2000)
        .attr("width", "100%")

}


d3.select("#animate-btn")
    .on("click", function() {

      reDraw("#usa", "#ukraine")

      // d3.selectAll(".countries")
      //   .attr("mask", null);

      // d3.select("#usa")
      //   .attr("mask", "url(#mask)")
      //   .attr("opacity", 1);

      // const maskPath = d3.select("#maskPath");
      // maskRect.attr("width", "0%");


      // //hide previous svg
      // d3.select("#ukraine")
      //   .attr("opacity", 1)
      //   .transition()
      //   .duration(2000)
      //   .attr("opacity", 0)


      // maskRect.transition()
      //   .duration(2000)
      //   .attr("width", "100%")
    });

    d3.select("#animate-btn3")
    .on("click", function() {

      reDraw("#china", "#ukraine")

    })


    d3.select("#animate-btn2")
    .on("click", function() {

      reDraw("#ukraine", "#usa")

      // d3.selectAll(".countries")
      //   .attr("mask", null);

      // d3.select("#ukraine")
      //   .attr("mask", "url(#mask)")
      //   .attr("opacity", 1);

      // const maskPath = d3.select("#maskPath");
      // maskRect.attr("width", "0%");

      // d3.select("#usa")
      //   .attr("opacity", 1)
      //   .transition()
      //   .duration(2000)
      //   .attr("opacity", 0)

      // maskRect.transition()
      //   .duration(2000)
      //   .attr("width", "100%")
    });

    // d3.select("#animate-btn2")
    // .on("click", function() {
    //   maskRect.transition()
    //     .duration(4000)
    //     .attr("width", "0%")
    // });




// const maskRect = mask.append("rect")
//   .attr("width", 0)
//   .attr("height", "100%")
//   .attr("x", 0)
//   .attr("y", 0)
//   .attr("fill", "#fff");
  
// const path = svg.append("path")
//   .attr("d", startPath)
//   .attr("stroke", "none")
//   .attr("fill", "red")
//   .attr("mask", "url(#path-mask)");

// let maskWidth = 0;
// let transition;

// d3.select("#animate-btn").on("click", function() {
//     let transition;
//     let maskWidth = 0;
//   if (transition) transition.interrupt();
  
//   maskRect.attr("width", 0);
//   maskWidth = 0;
  
//   transition = d3.interval(function(elapsed) {
//     maskWidth += 4;
//     maskRect.attr("width", maskWidth);
//     if (maskWidth >= svg.node().getBoundingClientRect().width) {
//       transition.stop();
//       //path.transition().duration(0).attr("d", endPath);
//     }
//   }, 10);
// });

    </script>
</body>
</html>